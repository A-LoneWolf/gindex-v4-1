(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a7159bf"],{"44e7":function(e,t,s){var i=s("861d"),a=s("c6b6"),n=s("b622"),r=n("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==a(e))}},"4d63":function(e,t,s){var i=s("83ab"),a=s("da84"),n=s("94ca"),r=s("7156"),l=s("9bf2").f,o=s("241c").f,d=s("44e7"),c=s("ad6d"),u=s("9f7f"),h=s("6eeb"),m=s("d039"),g=s("69f3").set,v=s("2626"),p=s("b622"),f=p("match"),C=a.RegExp,b=C.prototype,w=/a/g,_=/a/g,U=new C(w)!==w,x=u.UNSUPPORTED_Y,I=i&&n("RegExp",!U||x||m((function(){return _[f]=!1,C(w)!=w||C(_)==_||"/a/i"!=C(w,"i")})));if(I){var M=function(e,t){var s,i=this instanceof M,a=d(e),n=void 0===t;if(!i&&a&&e.constructor===M&&n)return e;U?a&&!n&&(e=e.source):e instanceof M&&(n&&(t=c.call(e)),e=e.source),x&&(s=!!t&&t.indexOf("y")>-1,s&&(t=t.replace(/y/g,"")));var l=r(U?new C(e,t):C(e,t),i?this:b,M);return x&&s&&g(l,{sticky:s}),l},k=function(e){e in M||l(M,e,{configurable:!0,get:function(){return C[e]},set:function(t){C[e]=t}})},y=o(C),E=0;while(y.length>E)k(y[E++]);b.constructor=M,M.prototype=b,h(a,"RegExp",M)}v("RegExp")},7156:function(e,t,s){var i=s("861d"),a=s("d2bb");e.exports=function(e,t,s){var n,r;return a&&"function"==typeof(n=t.constructor)&&n!==s&&i(r=n.prototype)&&r!==s.prototype&&a(e,r),e}},8129:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"content mt-2"},[s("h1",{staticClass:"title has-text-centered has-text-weight-bold has-text-white"},[e._v("Manage Your Users")]),s("div",{staticClass:"loading"},[s("loading",{attrs:{active:e.loading,"can-cancel":!1,"is-full-page":e.fullpage},on:{"update:active":function(t){e.loading=t}}})],1),s("div",{staticClass:"columns mx-3 is-mobile is-multiline is-vcentered"},[s("div",{staticClass:"column is-full"},[s("div",{staticClass:"columns is-desktop is-multiline is-vcentered is-centered"},[s("div",{staticClass:"column has-text-centered is-3"},[s("p",{staticClass:"control has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchEmail,expression:"searchEmail"}],staticClass:"input is-rounded",attrs:{placeholder:"Enter User's Email",autofocus:"",id:"email",type:"email"},domProps:{value:e.searchEmail},on:{input:function(t){t.target.composing||(e.searchEmail=t.target.value)}}}),e._m(0)])]),s("div",{staticClass:"column has-text-centered is-3"},[s("button",{class:e.loading?"button is-rounded is-loading is-warning":"button is-rounded is-warning",on:{click:e.handleRefresh}},[e._m(1),s("span",[e._v("Refresh")])])])])]),s("div",{class:e.usermodal?"modal is-active":"modal"},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title has-text-centered"},[e._v(e._s(e.currentUser.name))]),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:e.closeUserModal}})]),s("section",{staticClass:"modal-card-body"},[s("div",{staticClass:"columns is-mobile is-centered is-vcentered is-multiline"},[e._m(2),s("div",{staticClass:"column is-half"},[s("p",{staticClass:"subtitle has-text-black has-text-weight-semibold"},[e._v(e._s(e.currentUser.name))])]),e._m(3),s("div",{staticClass:"column is-half"},[s("p",{staticClass:"subtitle has-text-black has-text-weight-semibold"},[e._v(e._s(e.currentUser.email))])]),e._m(4),s("div",{staticClass:"column is-half"},[s("p",{staticClass:"subtitle has-text-black has-text-weight-semibold"},[e._v(e._s(e.currentUser.role))])]),s("div",{staticClass:"column is-full"},[s("article",{class:e.errorMessage?"message is-danger":"message is-hidden is-danger"},[s("div",{staticClass:"message-body"},[s("button",{staticClass:"delete",attrs:{"aria-label":"delete"},on:{click:function(t){e.errorMessage=!1}}}),e._v(" "+e._s(e.resultmessage)+" ")])])]),s("div",{staticClass:"column is-full"},[s("article",{class:e.successMessage?"message is-success":"message is-hidden is-success"},[s("div",{staticClass:"message-body"},[s("button",{staticClass:"delete",attrs:{"aria-label":"delete"},on:{click:function(t){e.successMessage=!1}}}),e._v(" "+e._s(e.resultmessage)+" ")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],class:e.admin&&e.superadmin?e.currentUser.admin&&e.currentUser.superadmin&&!e.currentUser.pending?"column has-text-centered is-half":"column has-text-right is-quarter":"column has-text-centered is-half"},[s("button",{staticClass:"button is-rounded is-danger",on:{click:function(t){e.deleteInput=!0}}},[e._v(" Delete ")])]),!e.admin||!e.superadmin||e.currentUser.admin||e.currentUser.superadmin||e.currentUser.pending?e._e():s("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],staticClass:"column has-text-left is-quarter has-text-centered"},[s("button",{staticClass:"button is-rounded is-primary",on:{click:function(t){e.inviteInput=!0}}},[e._v(" Invite as Admin ")])]),e.admin&&e.superadmin&&e.currentUser.admin&&!e.currentUser.superadmin&&!e.currentUser.pending?s("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],staticClass:"column has-text-left is-quarter has-text-centered"},[s("button",{staticClass:"button is-rounded is-primary",on:{click:function(t){e.inviteInput=!0}}},[e._v(" Invite as Superadmin ")])]):e._e(),e.admin&&e.superadmin&&!e.currentUser.admin&&!e.currentUser.superadmin&&e.currentUser.pending?s("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],staticClass:"column has-text-left is-quarter has-text-centered"},[s("button",{staticClass:"button is-rounded is-primary",on:{click:function(t){return e.gotoPage("/","register")}}},[e._v(" Grant Admin ")])]):e._e(),e.admin&&e.superadmin&&e.currentUser.admin&&!e.currentUser.superadmin&&e.currentUser.pending?s("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],staticClass:"column has-text-left is-quarter has-text-centered"},[s("button",{staticClass:"button is-rounded is-primary",on:{click:function(t){return e.gotoPage("/","register")}}},[e._v(" Grant Superadmin ")])]):e._e(),e.inviteInput?s("div",{staticClass:"column is-full"},[s("div",{staticClass:"columns is-mobile is-multiline is-centered"},[s("div",{staticClass:"column is-full"},[s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inviteMessage,expression:"inviteMessage"}],staticClass:"textarea is-success is-rounded",attrs:{placeholder:"Message to Him",id:"message",rows:"3",required:""},domProps:{value:e.inviteMessage},on:{input:function(t){t.target.composing||(e.inviteMessage=t.target.value)}}})])])]),s("div",{staticClass:"column has-text-right is-half"},[s("button",{staticClass:"button is-rounded is-primary",on:{click:function(t){return e.handleInvite(e.currentUser)}}},[e._v(" Invite ")])]),s("div",{staticClass:"column has-text-left is-half",on:{click:function(t){e.inviteInput=!1,e.errorMessage=!1}}},[s("button",{staticClass:"button is-rounded is-success"},[e._v(" Cancel ")])])])]):e._e(),e.deleteInput?s("div",{staticClass:"column is-full"},[s("div",{staticClass:"columns is-mobile is-multiline is-centered"},[s("div",{staticClass:"column is-full"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.deletePassword,expression:"deletePassword"}],staticClass:"input is-rounded is-danger",attrs:{id:"deletePassword",type:"password",placeholder:"Enter Your Admin Password"},domProps:{value:e.deletePassword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleUpgradeDelete(e.currentUser,"delete")},input:function(t){t.target.composing||(e.deletePassword=t.target.value)}}}),e._m(5)])])]),s("div",{staticClass:"column has-text-right is-half"},[s("button",{staticClass:"button is-rounded is-danger",on:{click:function(t){return e.handleUpgradeDelete(e.currentUser,"delete")}}},[e._v(" Delete ")])]),s("div",{staticClass:"column has-text-left is-half",on:{click:function(t){e.deleteInput=!1,e.errorMessage=!1}}},[s("button",{staticClass:"button is-rounded is-success"},[e._v(" Cancel ")])])])]):e._e()])])])]),e.searchedUsers.length>0?s("div",{staticClass:"column is-full"},[s("table",{staticClass:"table"},[e._m(6),s("tfoot",[s("tr",[s("th",{staticClass:"has-text-white"},[e._v("Total Users")]),s("th",{staticClass:"has-text-white"},[e._v(e._s(e.searchedUsers.length))])])]),s("tbody",e._l(e.searchedUsers,(function(t,i){return s("tr",{key:i},[s("th",{staticClass:"has-text-white"},[e._v(e._s(t.name))]),s("th",{staticClass:"has-text-white is-hidden-mobile is-hidden-touch"},[e._v(e._s(t.email.slice(0,30)))]),s("th",{staticClass:"has-text-white is-hidden-mobile is-hidden-touch"},[e._v(e._s(t.role))]),s("th",{staticClass:"has-text-white"},[s("button",{staticClass:"button is-danger is-rounded",on:{click:function(s){return e.userModal(t)}}},[e._v(" View ")])])])})),0)])]):s("div",{staticClass:"column is-full"},[s("p",{staticClass:"subtitle has-text-centered has-text-white"},[e._v("Please Click Refresh Button to Load Users")])])])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fas fa-search"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fas fa-sync"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column is-half"},[s("p",{staticClass:"subtitle has-text-black has-text-weight-normal"},[e._v("Name")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column is-half"},[s("p",{staticClass:"subtitle has-text-black has-text-weight-normal"},[e._v("Email")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column is-half"},[s("p",{staticClass:"subtitle has-text-black has-text-weight-normal"},[e._v("Role")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-lock"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",{staticClass:"has-text-white"},[e._v("Name")]),s("th",{staticClass:"has-text-white is-hidden-mobile is-hidden-touch"},[e._v("Email")]),s("th",{staticClass:"has-text-white is-hidden-mobile is-hidden-touch"},[e._v("Role")]),s("th",{staticClass:"has-text-white"},[e._v("Action")])])])}],n=(s("99af"),s("4de4"),s("4160"),s("4d63"),s("ac1f"),s("25f0"),s("159b"),s("e826")),r=s("9062"),l=s.n(r),o={components:{Loading:l.a},metaInfo:function(){var e=this;return{title:this.metatitle,titleTemplate:function(t){return t&&e.siteName?t?"".concat(t," | ").concat(e.siteName):"".concat(e.siteName):"Loading..."}}},data:function(){return{metatitle:"Manage Users",user:{},token:{},users:[],gds:[],currgd:{},deletePassword:"",errorMessage:!1,successMessage:!1,inviteAdmin:window.apiRoutes.inviteAdmin,inviteSuperAdmin:window.apiRoutes.inviteSuperAdmin,deleteUser:window.apiRoutes.deleteUser,deleteAdmin:window.apiRoutes.deleteAdmin,inviteInput:!1,deleteInput:!1,inviteApi:"",inviteMessage:"",resultmessage:"",currentUser:{},usermodal:!1,searchedUsers:[],apiurl:"",searchEmail:"",admin:!1,superadmin:!1,loading:!1,fullpage:!0}},methods:{handleRefresh:function(){var e=this;this.metatitle="Refreshing...",this.loading=!0,this.apiurl.length>0&&this.$http.post(this.apiurl,{email:this.user.email}).then((function(t){t.data.auth&&t.data.registered?(e.loading=!1,e.metatitle="Success...",e.users=t.data.users,e.searchedUsers=t.data.users):(e.metatitle="Failed...",console.log(t))}))},gotoPage:function(e,t){this.$ga.event({eventCategory:"Page Navigation",eventAction:e+" - "+this.siteName,eventLabel:"Manage Users"}),t?this.$router.push({path:"/"+this.currgd.id+":"+t+e}):this.$router.push({path:"/"+this.currgd.id+":"+e})},handleUpgradeDelete:function(e,t){var s=this;this.metatitle="Handling the Changes...",this.loading=!0;var i="";"delete"==t&&(i="User"==e.role?this.deleteUser:this.deleteAdmin),this.$http.post(i,{email:e.email,adminpass:this.deletePassword,adminuseremail:this.user.email}).then((function(e){"delete"==t&&(e.data.auth&&e.data.registered&&e.data.deleted?(s.usermodal=!1,s.metatitle="Done...",s.currentUser={},s.errorMessage=!1,s.successMessage=!1,s.inviteInput=!1,s.deleteInput=!1,s.deletePassword="",s.loading=!1,s.handleRefresh()):(s.loading=!1,s.errorMessage=!0,s.metatitle="Failed...",s.successMessage=!1,s.resultmessage=e.data.message))}))},handleInvite:function(e){var t=this;this.metatitle="Inviting...",this.loading=!0;var s="";s="User"==e.role?this.inviteAdmin:this.inviteSuperAdmin,"Admin"==e.role||"User"==e.role&&this.inviteMessage.length>0?this.$http.post(s,{email:e.email,message:this.inviteMessage,adminuseremail:this.user.email}).then((function(e){e.data.auth&&e.data.registered?(t.successMessage=!0,t.metatitle="Invite Sent...",t.errorMessage=!1,t.$ga.event({eventCategory:"Invite",eventAction:"Success - "+t.siteName,eventLabel:"Manage Users"}),t.resultmessage=e.data.message,t.loading=!1):(t.successMessage=!1,t.errorMessage=!0,t.metatitle="Invite Failed...",t.$ga.event({eventCategory:"Invite",eventAction:"Failed - "+t.siteName,eventLabel:"Manage Users"}),t.resultmessage=e.data.message,t.loading=!1)})):console.log(this.inviteMessage)},userModal:function(e){var t=this;this.usermodal=!0,this.errorMessage=!1,this.successMessage=!1,this.currentUser=e,this.metatitle="Handling the Changes...";var s="";"User"==e.role?s=window.apiRoutes.getPendingAdmins:"Admin"==e.role&&(s=window.apiRoutes.getPendingSuperAdmins),console.log(s),"User"==e.role||"Admin"==e.role?(this.loading=!0,this.$http.post(s,{adminuseremail:this.user.email}).then((function(s){s?(console.log(s),s.data.auth&&s.data.registered?s.data.users.forEach((function(s){s.email==e.email?(t.loading=!1,t.metatitle="Done...",t.currentUser.pending=!0):(t.loading=!1,t.metatitle="Failed...",t.currentUser.pending=!1)})):(t.metatitle="Failed...",t.loading=!1,t.currentUser.pending=!1)):(t.loading=!1,t.metatitle="Failed...",t.currentUser.pending=!1)}))):(this.loading=!1,this.metatitle="Failed...",this.currentUser.pending=!1)},closeUserModal:function(){this.usermodal=!1,this.currentUser={},this.metatitle="Manage Users",this.errorMessage=!1,this.successMessage=!1,this.inviteInput=!1,this.deleteInput=!1,this.deletePassword=""}},beforeMount:function(){this.loading=!0;var e=Object(n["b"])();e.isThere?"hybrid"==e.type?(this.$ga.event({eventCategory:"User Initialized",eventAction:"Hybrid - "+this.siteName,eventLabel:"Manage Users",nonInteraction:!0}),this.user=e.data.user,this.logged=e.data.logged,this.loading=e.data.loading):"normal"==e.type&&(this.$ga.event({eventCategory:"User Initialized",eventAction:"Normal - "+this.siteName,eventLabel:"Manage Users",nonInteraction:!0}),this.user=e.data.user,this.token=e.data.token,this.logged=e.data.logged,this.loading=e.data.loading,this.admin=e.data.admin,this.superadmin=e.data.superadmin):(this.logged=e.data.logged,this.loading=e.data.loading)},computed:{siteName:function(){var e=this;return window.gds.filter((function(t,s){return s==e.$route.params.id}))[0]}},mounted:function(){this.admin&&this.superadmin?(this.loading=!1,this.apiurl=window.apiRoutes.getAll):this.admin&&!this.superadmin?(this.loading=!1,this.apiurl=window.apiRoutes.getUsers):this.$router.push({name:"results",params:{id:this.currgd.id,cmd:"result",data:"UnAuthorized Route.",redirectUrl:"/",tocmd:"home"}})},created:function(){var e=Object(n["a"])(this.$route.params.id);this.gds=e.gds,this.currgd=e.current,this.$ga.page({page:this.$route.path,title:"Manage Users - "+this.siteName,location:window.location.href})},watch:{searchEmail:function(){if(this.users.length){var e=this.searchEmail,t=new RegExp(e,"g");this.searchedUsers=this.users.filter((function(e){return t.test(e.email)}))}}}},d=o,c=s("2877"),u=Object(c["a"])(d,i,a,!1,null,null,null);t["default"]=u.exports}}]);